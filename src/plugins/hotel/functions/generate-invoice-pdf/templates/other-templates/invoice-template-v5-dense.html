<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{documentType}} – {{bookingId}}</title>
<style>
  :root{
    --primary:#0066CC;
    --primary-600:#0057AD;
    --primary-50:#F0F7FF;
    --ink:#222;
    --muted:#667085;
    --line:#E5E7EB;
    --success:#0E9F6E;
    --pending:#A16207;
    --new:#2563EB;
    --danger:#B91C1C;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:#fff;color:var(--ink);
    font:13.5px/1.33 Arial, system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",sans-serif}
  .doc{width:100%;max-width:794px;margin:0 auto;padding:0.18in 0.22in}

  /* ===== HEADER compacto: 3 columnas ===== */
  .brandbar{background:var(--primary);color:#fff;border-radius:10px;padding:8px 12px;margin-bottom:10px}
  .hgrid{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:8px}
  .brand{min-width:0}
  .brand h1{margin:0;font-size:14px;font-weight:800;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .brand small{opacity:.95;font-size:11px}
  .doctype{text-align:center;font-weight:900;text-transform:uppercase;letter-spacing:.3px;font-size:13.5px}
  .meta{justify-self:end;text-align:right;font-size:11.5px;opacity:.95}

  /* ===== CARDS ===== */
  .card{background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px;margin-top:8px}
  .card h3{margin:0 0 4px 0;font-size:12px;color:var(--primary-600);letter-spacing:.25px;text-transform:uppercase}

  /* ===== GRID estable para PDF ===== */
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  @media (max-width:720px){ .grid{grid-template-columns:1fr} }

  /* ===== KV ===== */
  .kv{width:100%;border-collapse:collapse}
  .kv td{padding:5px 0;vertical-align:top;font-size:13px}
  .kv td.label{width:42%;color:var(--muted);padding-right:8px}
  .kv td.value{font-weight:600}

  /* ===== ICONOS ===== */
  .rowi{display:flex;align-items:center;gap:6px}
  .ico{width:15px;height:15px;display:inline-block;opacity:.9}
  .ico svg{width:15px;height:15px;display:block}

  /* ===== CHIP de estado ===== */
  .badge{display:inline-block;border-radius:999px;padding:3px 8px;font-size:11px;font-weight:800;letter-spacing:.15px;border:1px solid transparent}
  .badge.pending{color:#8A5E00;background:#FFF7E6;border-color:#F3D9A4}
  .badge.confirmed{color:#065F46;background:#ECFDF5;border-color:#A7F3D0}
  .badge.new{color:#1D4ED8;background:#EFF6FF;border-color:#BFDBFE}

  /* ===== TABLA de ítems (compacta, alineada) ===== */
  .table{width:100%;border-collapse:collapse;margin-top:4px}
  .table thead th{font-size:11.5px;text-transform:uppercase;letter-spacing:.25px;color:#6B7280;text-align:left;border-bottom:1px solid var(--line);padding:6px 6px}
  .table tbody td{padding:6px 6px;border-bottom:1px dashed #ECF0F4;font-size:13px;vertical-align:top}
  .table tfoot td{padding:6px 6px;border-top:1px solid var(--line);font-weight:700}
  .num{text-align:right;white-space:nowrap}
  .unit{color:var(--muted);font-weight:400}
  .neg{color:var(--danger)}

  /* ===== TOTALES ===== */
  .highlight{background:var(--primary-50);border:1px solid #E1EEFF;padding:8px;border-radius:8px}
  .totals{width:100%;border-collapse:collapse}
  .totals td{padding:5px 0;font-size:13px}
  .totals td.label{color:var(--muted)}
  .totals td.value{font-weight:900;text-align:right}
  .totals .balance td.value{color:var(--primary-600)}

  /* ===== POLÍTICAS + FOOTER ===== */
  .policies{font-size:11.5px;color:#374151;margin-top:2px}
  .policies ul{margin:4px 0 0 16px;padding:0}
  .policies li{margin:0 0 3px 0}
  .footer{margin-top:6px;font-size:10.5px;color:#5B6570;text-align:center;border-top:1px solid var(--line);padding-top:6px}

  /* Densidad opcional: agrega class .is-dense al <body> para aún más compacto */
  .is-dense .doc{padding:0.16in 0.20in}
  .is-dense .card{padding:8px}
  .is-dense .table thead th{padding:5px 6px}
  .is-dense .table tbody td{padding:5px 6px}
  .is-dense .brandbar{padding:7px 10px}

  @media print{ .doc{padding:0.16in 0.20in} }
</style>
</head>
<body>
  <div class="doc">
    <!-- HEADER compacto -->
    <div class="brandbar">
      <div class="hgrid">
        <div class="brand">
          <h1>{{companyInfo.name}}</h1>
          <small>NIT {{companyInfo.nit}}</small>
        </div>
        <div class="doctype">{{documentType}}</div>
        <div class="meta">
          <div>Reserva #{{bookingId}}</div>
          <div>{{currentDate}}</div>
        </div>
      </div>
    </div>

    <!-- RESUMEN + HUÉSPED -->
    <div class="grid">
      <div class="card">
        <h3>Resumen</h3>
        <table class="kv">
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- calendar -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
              </span>Check-in</span>
            </td>
            <td class="value">{{checkInDate}}</td>
          </tr>
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- calendar -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
              </span>Check-out</span>
            </td>
            <td class="value">{{checkOutDate}}</td>
          </tr>
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- moon -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
              </span>Noches</span>
            </td>
            <td class="value">{{nights}}</td>
          </tr>
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- home -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M3 10.5L12 3l9 7.5"/><path d="M19 10.5V21H5V10.5"/></svg>
              </span>Alojamiento</span>
            </td>
            <td class="value">{{roomName}}</td>
          </tr>
        </table>
      </div>

      <div class="card">
        <h3>Huésped</h3>
        <table class="kv">
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- user -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              </span>Nombre</span>
            </td>
            <td class="value">{{guestName}}</td>
          </tr>
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- users -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              </span>Personas</span>
            </td>
            <td class="value">{{guestCount}}</td>
          </tr>
          {{#if phone}}
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- phone -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M22 16.92V21a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 3.07 12.8 19.79 19.79 0 0 1 0 4.18 2 2 0 0 1 2 2h4.09a2 2 0 0 1 2 1.72c.12.9.3 1.77.57 2.61a2 2 0 0 1-.45 2.11L7.1 9.88a16 16 0 0 0 7.02 7.02l1.44-1.11a2 2 0 0 1 2.11-.45c.84.27 1.71.45 2.61.57A2 2 0 0 1 22 16.92z"/></svg>
              </span>Teléfono</span>
            </td>
            <td class="value">{{phone}}</td>
          </tr>
          {{/if}}
          {{#if email}}
          <tr>
            <td class="label">
              <span class="rowi"><span class="ico">
                <!-- mail -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M4 4h16v16H4z"/><path d="M22 6l-10 7L2 6"/></svg>
              </span>Email</span>
            </td>
            <td class="value">{{email}}</td>
          </tr>
          {{/if}}
        </table>

        {{#if bookingStatus}}
          <div style="height:6px"></div>
          <span class="badge {{statusClass}}">{{bookingStatus}}</span>
        {{/if}}
      </div>
    </div>

    <!-- DETALLE -->
    <div class="card">
      <h3>Detalle</h3>
      <table class="table">
        <thead>
          <tr>
            <th style="width:54%">Descripción</th>
            <th class="num" style="width:13%">Cant.</th>
            <th class="num" style="width:16%">Unitario</th>
            <th class="num" style="width:17%">Total</th>
          </tr>
        </thead>
        <tbody>
          {{#each invoiceItems}}
            <tr>
              <td>{{description}}</td>
              <td class="num">{{quantity}}</td>
              <td class="num">{{unitPrice}}</td>
              <td class="num"><strong>{{totalAmount}}</strong></td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>

    <!-- PAGO + NOTAS -->
    <div class="grid">
      <div class="card">
        <h3>Notas & Políticas</h3>
        <div class="policies">
          <ul>
            <li>Check-in desde 3:00 p. m.; check-out hasta 11:00 a. m.</li>
            <li>Cancelación sujeta a condiciones de la tarifa reservada.</li>
            <li>Contacto: {{companyInfo.phone}} · {{companyInfo.email}} · WhatsApp {{companyInfo.whatsapp}}</li>
          </ul>
        </div>
      </div>

      <div class="card">
        <h3>Resumen de Pago</h3>
        <div class="highlight">
          <table class="totals">
            <tr>
              <td class="label">Total</td>
              <td class="value">{{totalCharges}}</td>
            </tr>
            {{#if totalPaid}}
            <tr>
              <td class="label">Pagado</td>
              <td class="value">{{totalPaid}}</td>
            </tr>
            <tr class="balance">
              <td class="label">Saldo</td>
              <td class="value">{{balance}}</td>
            </tr>
            {{/if}}
          </table>
        </div>
      </div>
    </div>

    <!-- FOOTER mínimo -->
    <div class="footer">
      {{companyInfo.address}} · Tel: {{companyInfo.phone}} · {{companyInfo.email}} · {{companyInfo.website}}
    </div>
  </div>
</body>
</html>