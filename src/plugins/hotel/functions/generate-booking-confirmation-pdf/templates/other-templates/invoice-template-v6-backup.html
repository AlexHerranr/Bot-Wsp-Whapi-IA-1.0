<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{documentType}} – {{bookingId}}</title>
<style>
  :root{
    --primary: #0066CC;
    --ink: #1f2937;     /* gris texto principal */
    --muted: #667085;   /* gris texto secundario */
    --line: #E5E7EB;    /* líneas suaves */
    --accent: #F0F7FF;  /* azul muy claro */
    --danger: #B91C1C;  /* negativo (opcional) */
  }

  *{ box-sizing: border-box; }
  html,body{
    margin:0; padding:0; background:#fff; color:var(--ink);
    font:14.5px/1.34 Arial, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
  }

  /* Contenedor pensado para A4 (794px aprox. de viewport en tu Puppeteer) */
  .container{
    width:100%; max-width:760px; margin:0 auto;
    padding:14px 18px; /* compacto real */
  }

  /* ====== HEADER ====== */
  .header{
    background: #fff;
    border:1px solid var(--line);
    border-radius:12px;
    padding:10px 12px;
    display:grid;
    grid-template-columns: 1fr auto 1fr;
    align-items:center;
    gap:10px;
    margin-bottom:10px;
  }
  .brand{
    display:flex; align-items:center; gap:10px; min-width:0;
  }
  .brand .logo{
    display:flex; align-items:center; justify-content:flex-start;
    max-height:22px;  /* <—— tamaño real del logo */
  }
  .brand .logo img{
    max-height:22px; width:auto; display:block; object-fit:contain;
  }
  .brand .brand-text{
    font-weight:800; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    color:#0f1f33;
  }

  .doctype{
    text-align:center; font-weight:900; letter-spacing:.3px;
    color:var(--primary); text-transform:uppercase; font-size:16px;
  }
  .meta{
    text-align:right; font-size:12.5px; color:var(--muted);
  }

  /* ====== TITULARES ====== */
  .section-title{
    text-align:center; color:var(--primary); text-transform:uppercase;
    font-size:15px; font-weight:800; letter-spacing:.25px;
    padding:6px 0; margin:8px 0 6px 0;
    border-top:1px solid var(--line);
    border-bottom:1px solid var(--line);
  }

  /* ====== INFO TABLA ====== */
  .info-table{
    width:100%; border-collapse:collapse; margin:8px 0 14px 0;
  }
  .info-table th{
    background:var(--accent); color:#0b3d73;
    text-transform:uppercase; letter-spacing:.25px;
    font-size:13.5px; font-weight:800; text-align:left;
    padding:8px 10px; border:1px solid var(--line);
  }
  .info-table td{
    font-size:14px; padding:8px 10px; border-bottom:1px solid var(--line);
    vertical-align:top;
  }
  .info-label{ color:var(--muted); width:38%; }
  .note{
    margin:4px 0 0 0; font-size:12.5px; color:#374151;
  }

  /* ====== PAGO / DETALLE ====== */
  .payment-title{ composes: section-title; } /* comentario: sólo semántico */
  .table{
    width:100%; border-collapse:collapse; margin:6px 0 14px 0;
  }
  .table thead th{
    font-size:12.5px; color:#6B7280; text-transform:uppercase; letter-spacing:.25px;
    text-align:left; border-bottom:1px solid var(--line);
    padding:8px 6px;
  }
  .table tbody td{
    padding:7px 6px; border-bottom:1px dashed #edf2f7; font-size:14px; vertical-align:top;
  }
  .num{ text-align:right; white-space:nowrap; }
  .neg{ color:var(--danger); }

  .grand{
    font-weight:800; border-top:1px solid var(--line);
  }
  .totals-row td{ padding-top:8px; }

  /* ====== POLÍTICAS ====== */
  .policy-title{
    text-align:center; color:var(--primary); text-transform:uppercase;
    font-size:15px; font-weight:800; letter-spacing:.25px;
    padding:6px 0; margin:8px 0 6px 0;
    border-top:1px solid var(--line);
    border-bottom:1px solid var(--line);
  }
  .policy{
    font-size:13.5px; color:#374151; margin:8px 0 12px 0;
  }
  .policy .row{
    display:flex; align-items:flex-start; gap:8px;
  }
  .policy .ico{
    width:14px; height:14px; flex:0 0 14px; margin-top:2px; opacity:.9;
  }

  /* ====== FOOTER ====== */
  .footer{
    font-size:12.5px; text-align:center; color:#5B6570;
    border-top:1px solid var(--line); padding-top:8px; margin-top:10px;
  }
  .footer a{ color:var(--primary); font-weight:700; text-decoration:none; }

  /* ====== UTIL ====== */
  .center{ text-align:center; }
</style>
</head>
<body>
  <div class="container">

    <!-- HEADER compacto con logo que siempre se ve bien -->
    <div class="header">
      <div class="brand">
        <div class="logo">
          <!-- Reemplaza por tu imagen. Si falla, mostraremos la marca textual -->
          <img src="https://static.wixstatic.com/media/9d70be_89482391d42842e3b42d61b34fdaf7b6~mv2.png/v1/crop/x_249,y_397,w_8078,h_2556/fill/w_393,h_121,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/COMPLETO%20PNG.png"
               alt="Pa'Cartagena"
               onerror="this.style.display='none'; this.parentElement.nextElementSibling.style.display='inline-block';" />
        </div>
        <div class="brand-text" style="display:none">{{companyInfo.name}}</div>
      </div>

      <div class="doctype">{{documentType}}</div>

      <div class="meta">
        <div>Código: {{bookingId}}</div>
        <div>{{currentDate}}</div>
      </div>
    </div>

    <!-- INFORMACIÓN DE LA RESERVA -->
    <table class="info-table">
      <thead>
        <tr><th colspan="2">Información de la Reserva</th></tr>
      </thead>
      <tbody>
        <tr>
          <td class="info-label"><strong>Nombre</strong></td>
          <td>{{guestName}}</td>
        </tr>
        <tr>
          <td class="info-label"><strong>Número de Personas</strong></td>
          <td>{{guestCount}}</td>
        </tr>
        <tr>
          <td class="info-label"><strong>Tipo de Apartamento</strong></td>
          <td>{{roomName}}</td>
        </tr>
        {{#if phone}}
        <tr>
          <td class="info-label"><strong>Teléfono</strong></td>
          <td>{{phone}}</td>
        </tr>
        {{/if}}
        {{#if email}}
        <tr>
          <td class="info-label"><strong>Email</strong></td>
          <td>{{email}}</td>
        </tr>
        {{/if}}
        <tr>
          <td class="info-label"><strong>Día de Llegada</strong></td>
          <td>
            {{checkInDate}}
            <div class="note">Check-in a partir de las 3:00 p. m.</div>
          </td>
        </tr>
        <tr>
          <td class="info-label"><strong>Día de Salida</strong></td>
          <td>
            {{checkOutDate}}
            <div class="note">Check-out antes de las 11:45 a. m.</div>
          </td>
        </tr>
        <tr>
          <td class="info-label"><strong>Noches</strong></td>
          <td>{{nights}} noche{{#if multipleDays}}s{{/if}}</td>
        </tr>
        {{#if bookingStatus}}
        <tr>
          <td class="info-label"><strong>Estado</strong></td>
          <td>{{bookingStatus}}</td>
        </tr>
        {{/if}}
      </tbody>
    </table>

    <!-- DESGLOSE DEL PAGO / DETALLE -->
    <div class="section-title">Desglose del Pago</div>
    <table class="table">
      <thead>
        <tr>
          <th style="width:52%">Descripción</th>
          <th class="center" style="width:14%">Cantidad</th>
          <th class="num" style="width:16%">Precio</th>
          <th class="num" style="width:18%">Total</th>
        </tr>
      </thead>
      <tbody>
        {{#each invoiceItems}}
        <tr>
          <td>{{description}}</td>
          <td class="center">{{quantity}}</td>
          <td class="num">{{unitPrice}}</td>
          <td class="num"><strong>{{totalAmount}}</strong></td>
        </tr>
        {{/each}}
      </tbody>

      <!-- Totales -->
      <tbody>
        <tr class="totals-row grand">
          <td><strong>Total</strong></td>
          <td></td><td></td>
          <td class="num"><strong>{{totalCharges}}</strong></td>
        </tr>

        {{#if totalPaid}}
        <tr class="totals-row">
          <td>Pagado</td>
          <td></td><td></td>
          <td class="num">{{totalPaid}}</td>
        </tr>
        <tr class="totals-row">
          <td><strong>Saldo Pendiente</strong></td>
          <td></td><td></td>
          <td class="num"><strong>{{balance}}</strong></td>
        </tr>
        {{/if}}
      </tbody>
    </table>

    <!-- POLÍTICAS -->
    <div class="policy-title">Política de Cancelación</div>
    <div class="policy">
      <div class="row">
        <div class="ico">
          <!-- triángulo advertencia (SVG vectorial, sin emoji) -->
          <svg viewBox="0 0 24 24" fill="none" stroke="#D97706" stroke-width="1.8">
            <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13" />
            <line x1="12" y1="17" x2="12" y2="17" />
          </svg>
        </div>
        <div>
          Pueden cancelar hasta 15 días antes de la llegada y recibir un reembolso del 50% del valor total del anticipo.
          La cancelación debe realizarse 15 días completos antes de la hora local de llegada al apartamento.
          No incluye alimentación ni limpieza diaria.
        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">
      {{companyInfo.address}} · Tel: {{companyInfo.phone}} · {{companyInfo.email}} ·
      <a href="http://{{companyInfo.website}}">{{companyInfo.website}}</a>
    </div>

  </div>
</body>
</html>