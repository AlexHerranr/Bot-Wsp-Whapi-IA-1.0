# 16_GESTION_DISPONIBILIDAD.txt

**Sistema Integral de Gesti√≥n y Comunicaci√≥n de Disponibilidad con Beds24**

**Versi√≥n:** 3.0  
**Responsable:** Sistema de Conocimiento  
**Keywords:** disponibilidad, beds24, check_availability, bot, autom√°tico, function, calling  
**Archivos relacionados:** 03_INVENTARIO_APARTAMENTOS.txt, 02_TARIFAS_TEMPORADAS.txt, 12_POLITICAS_OPERATIVAS.txt

---

## **PROP√ìSITO DEL ARCHIVO**
Sistema automatizado para que el bot gestione disponibilidad en tiempo real mediante integraci√≥n con Beds24. Define el uso de check_availability() como √∫nica fuente de verdad y protocolos de comunicaci√≥n natural con clientes.

---

## **1. PROTOCOLO DE VERIFICACI√ìN DE DISPONIBILIDAD**

### **1.1 Fuente √önica de Verdad: Beds24**

#### **1.1.1 Proceso Simplificado del Bot**
```
1. Cliente solicita fechas ‚Üí Bot ejecuta check_availability()
2. Beds24 retorna opciones disponibles con precios reales
3. Bot comunica resultado en lenguaje natural
4. Si no hay disponibilidad ‚Üí Ofrecer alternativas o escalar
```

### **1.2 Informaci√≥n Requerida para B√∫squeda**

#### **1.2.1 Datos Esenciales**
- **Fecha de entrada**: Formato YYYY-MM-DD
- **Fecha de salida**: Formato YYYY-MM-DD
- **N√∫mero de hu√©spedes**: Para comunicar opciones adecuadas

#### **1.2.2 Conversi√≥n Autom√°tica de Fechas**
```
"ma√±ana" ‚Üí 2025-07-03
"este fin de semana" ‚Üí 2025-07-05 al 2025-07-07
"15 de julio" ‚Üí 2025-07-15
DD/MM/YYYY ‚Üí YYYY-MM-DD (conversi√≥n autom√°tica)
```

---

## **2. FUNCTION CALLING REAL IMPLEMENTADO**

### **2.1 Sintaxis Correcta de check_availability()**
```
check_availability("2025-07-02", "2025-07-06")

PAR√ÅMETROS:
- startDate: String en formato "YYYY-MM-DD"
- endDate: String en formato "YYYY-MM-DD"

RETORNA:
- Texto formateado con opciones disponibles
- Precios reales desde Beds24
- Informaci√≥n de traslados si aplica
```

### **2.2 Interpretaci√≥n de Resultados Beds24**

#### **2.2.1 Disponibilidad Completa**
```
"DISPONIBILIDAD COMPLETA" 
‚Üí Apartamentos sin necesidad de traslados
‚Üí Comunicar opciones directamente
```

#### **2.2.2 Alternativas con Traslado**
```
"ALTERNATIVAS CON TRASLADO"
‚Üí Requiere cambio de apartamento durante estad√≠a
‚Üí Explicar log√≠stica del cambio claramente
```

#### **2.2.3 Sin Disponibilidad**
```
"No hay disponibilidad"
‚Üí Ofrecer fechas alternativas cercanas
‚Üí Si cliente insiste ‚Üí escalate_to_human("no_availability")
```

#### **2.2.4 Error o Timeout**
```
Error en consulta ‚Üí escalate_to_human("technical_issue", context)
```

---

## **3. COMUNICACI√ìN NATURAL DE RESULTADOS**

### **3.1 Principios de Comunicaci√≥n**
- **P√°rrafos naturales**: Bot genera respuestas fluidas autom√°ticamente
- **Sin templates r√≠gidos**: Adaptaci√≥n seg√∫n contexto
- **Transparencia total**: Comunicar exactamente lo que retorna Beds24
- **Empat√≠a**: Especialmente cuando no hay disponibilidad

### **3.2 Ejemplos de Comunicaci√≥n Natural**

#### **3.2.1 Con Disponibilidad**
```
"¬°Perfecto! Tengo disponibilidad para esas fechas üòä

Para 4 personas del 15 al 20 de julio, tengo estas opciones:

El apartamento 1722A est√° disponible todas las noches a $280.000 por noche, 
o el 814 a $250.000. Ambos son de una alcoba con vista al mar.

El total incluye el cargo de limpieza. ¬øTe gustar√≠a ver fotos de alguno?"
```

#### **3.2.2 Con Traslado Necesario**
```
"Tengo una opci√≥n que requiere un peque√±o cambio:

Las primeras 3 noches en el apartamento 1722A y las √∫ltimas 2 en el 814.
Ambos est√°n en el mismo edificio, as√≠ que el cambio es s√∫per sencillo.

Te ayudamos con el equipaje durante el cambio. ¬øTe funciona esta alternativa?"
```

#### **3.2.3 Sin Disponibilidad**
```
"Para esas fechas espec√≠ficas no tengo disponibilidad üòï

¬øPodr√≠as considerar del 22 al 27 de julio? Tengo excelentes opciones disponibles.
O si prefieres, puedo conectarte con alguien que busque alternativas con colegas."
```

---

## **4. GESTI√ìN DE NO DISPONIBILIDAD**

### **4.1 Proceso Simplificado**
```
1. check_availability() retorna "no disponible"
2. Bot ofrece fechas alternativas cercanas autom√°ticamente
3. Si cliente necesita fechas espec√≠ficas ‚Üí escalate_to_human()
```

### **4.2 Comunicaci√≥n Emp√°tica**
```
"Entiendo que necesitas esas fechas espec√≠ficas. Lamentablemente no tengo 
disponibilidad en nuestros apartamentos.

D√©jame conectarte con alguien de nuestro equipo que puede buscar opciones 
con colegas de confianza."

[EJECUTAR: escalate_to_human("no_availability", context)]
```

---

## **5. FLEXIBILIZACI√ìN DE FECHAS Y ALTERNATIVAS**

### **5.1 Cuando No Hay Disponibilidad Exacta**

#### **5.1.1 Propuesta de Fechas Cercanas**
```
"No tengo para el 15 de julio, pero s√≠ disponibilidad:

‚Ä¢ Del 13 al 18 de julio - mismos precios
‚Ä¢ Del 17 al 22 de julio - con descuento del 10%

¬øAlguna de estas opciones te funciona?"
```

#### **5.1.2 Incentivos por Flexibilidad**
- "Si puedes llegar un d√≠a antes, mantengo el mismo precio"
- "Extendiendo una noche m√°s, te incluyo el early check-in gratis"
- "Entre semana los precios son m√°s convenientes"

---

## **6. VALIDACI√ìN DE FECHAS Y MANEJO DE ERRORES**

### **6.1 Validaci√≥n Autom√°tica**
```
ACEPTA:
- Fechas futuras desde hoy (2025-07-02)
- Lenguaje natural: "ma√±ana", "pr√≥ximo fin de semana"
- Formatos DD/MM/YYYY (convierte a YYYY-MM-DD)

RECHAZA:
- Fechas pasadas con mensaje claro
- Rangos inv√°lidos (salida antes que entrada)
```

### **6.2 Mensajes de Error Claros**
```
"Las fechas parecen estar al rev√©s. ¬øLlegas el [FECHA1] y sales el [FECHA2]?"

"Esa fecha ya pas√≥. ¬øPara cu√°ndo ser√≠a tu viaje?"
```

---

## **7. CASOS ESPECIALES Y ESCALAMIENTO**

### **7.1 Cu√°ndo Escalar Autom√°ticamente**
```
TRIGGERS:
- No hay disponibilidad en fechas solicitadas
- Error t√©cnico en check_availability()
- Cliente insiste despu√©s de no disponibilidad
- Solicitudes de m√°s de 5 apartamentos
- Necesidades muy espec√≠ficas no cubiertas
```

### **7.2 Function Calling para Escalamiento**
```
escalate_to_human("no_availability", {
  "dates": {
    "start": "2025-07-15",
    "end": "2025-07-20"
  },
  "guests": 4,
  "attempts": ["check_availability", "alternative_dates_offered"],
  "client_response": "Necesita esas fechas espec√≠ficas"
})
```

---

## **8. MANEJO DE ROTACIONES Y TRASLADOS**

### **8.1 Cuando Beds24 Retorna Opciones con Traslado**
```
El bot recibe: "ALTERNATIVAS CON TRASLADO"
Comunica naturalmente la log√≠stica del cambio
No necesita gesti√≥n manual - Beds24 ya calcul√≥ las opciones
```

### **8.2 Comunicaci√≥n de Traslados**
```
"Esta opci√≥n requiere un cambio de apartamento durante tu estad√≠a:

‚Ä¢ Primeras 3 noches: Apartamento 1722A
‚Ä¢ √öltimas 2 noches: Apartamento 814

El cambio ser√≠a el d√≠a 18. Te ayudamos con el equipaje y el proceso es 
muy sencillo ya que est√°n en el mismo edificio. ¬øTe funciona?"
```

---

## **9. FRASES PROHIBIDAS Y TRANSFORMACIONES**

### **9.1 Nunca Usar**
‚ùå "No tenemos nada" 
‚ùå "Est√° todo ocupado"
‚ùå "Es imposible"
‚ùå "El sistema no muestra disponibilidad"

### **9.2 Siempre Reemplazar Por**
‚úÖ "D√©jame verificar qu√© opciones tengo"
‚úÖ "Voy a buscar alternativas"
‚úÖ "Puedo ofrecerte estas fechas cercanas"
‚úÖ "Te conecto con alguien que puede ayudarte mejor"

---

## **10. INTEGRACI√ìN Y REFERENCIAS**

### **10.1 Para Informaci√≥n de Apartamentos**
**CONSULTAR**: `03_INVENTARIO_APARTAMENTOS.txt`
- Caracter√≠sticas de apartamentos mencionados
- Enlaces de fotos WhatsApp

### **10.2 Para Contexto de Temporadas**
**CONSULTAR**: `02_TARIFAS_TEMPORADAS.txt`
- Entender variaciones de precio
- Temporadas alta/baja para contexto

### **10.3 Para Comunicaci√≥n Natural**
**APLICAR**: `17_COMUNICACION_NATURAL.txt`
- Humanizaci√≥n de respuestas
- Tuteo y emojis estrat√©gicos

---

## **NOTA ARQUITECT√ìNICA CR√çTICA**

Este archivo define la gesti√≥n de disponibilidad con **integraci√≥n real Beds24**:

**CARACTER√çSTICAS ACTUALES:**
- ‚úÖ **check_availability()** como √∫nica fuente de verdad
- ‚úÖ **Formato YYYY-MM-DD** obligatorio para fechas
- ‚úÖ **Sin inventario local** - Todo desde Beds24
- ‚úÖ **Comunicaci√≥n natural** en p√°rrafos fluidos
- ‚úÖ **Escalamiento inteligente** cuando necesario

**ELIMINADO POR OBSOLETO:**
- ‚ùå Jerarqu√≠a de b√∫squeda manual
- ‚ùå Variables complejas no utilizadas
- ‚ùå Sistema de pre-reservas no implementado
- ‚ùå Templates r√≠gidos con variables
