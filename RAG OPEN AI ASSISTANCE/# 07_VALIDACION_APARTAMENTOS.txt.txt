# 07_VALIDACION_APARTAMENTOS.txt

**Sistema de Validación y Corrección Automática de Códigos de Apartamentos**

**Versión:** 3.0  
**Responsable:** Sistema de Conocimiento  
**Keywords:** validacion, apartamento, codigo, correccion, inventario, existe, bot, automatico  
**Archivos relacionados:** 03_INVENTARIO_APARTAMENTOS.txt (datos), 15_PLANTILLAS_RESPUESTAS.txt (templates)

---

## **PROPÓSITO DEL ARCHIVO**
Fuente única de verdad para que el bot valide automáticamente códigos de apartamentos y aplique correcciones sin intervención humana. Sistema inteligente de validación con comunicación directa optimizada para móvil.

---

## **1. INVENTARIO OFICIAL DE CÓDIGOS VÁLIDOS**

### **1.1 Apartamentos de Una Alcoba**
```
CÓDIGOS_VÁLIDOS_ALCOBA = [
    "1317",
    "1722A", 
    "1820",
    "2005A",
    "814",
    "715"
]
```

### **1.2 Apartaestudios**
```
CÓDIGOS_VÁLIDOS_ESTUDIO = [
    "1722B",
    "2005B"
]
```

### **1.3 Inventario Consolidado**
```
TOTAL_APARTAMENTOS: 8 unidades
ALCOBAS: 6 unidades  
ESTUDIOS: 2 unidades
CÓDIGOS_VÁLIDOS_COMPLETO: [1317, 1722A, 1820, 2005A, 814, 715, 1722B, 2005B]
```

---

## **2. SISTEMA DE CORRECCIÓN AUTOMÁTICA DEL BOT**

### **2.1 Correcciones Silenciosas (Sin Notificar al Cliente)**
```
MAPEO_CORRECCIONES = {
    "17A"  → "1722A",
    "17B"  → "1722B", 
    "20A"  → "2005A",
    "20B"  → "2005B"
}
```

**REGLA:** El bot aplica estas correcciones automáticamente sin mencionarlo al cliente.

### **2.2 Códigos Ambiguos (Pedir Clarificación al Cliente)**
```
CÓDIGOS_AMBIGUOS = {
    "1722" → "¿Te refieres al 1722A (alcoba) o 1722B (estudio)?",
    "2005" → "¿Te refieres al 2005A (alcoba) o 2005B (estudio)?",
    "175"  → "¿Te refieres al 1722B (estudio) o 715 (alcoba)?"
}
```

### **2.3 Códigos Similares (Sugerir al Cliente)**
```
CÓDIGOS_SIMILARES = {
    "816"  → "¿Te refieres al 814?",
    "517"  → "¿Te refieres al 715?",
    "1316" → "¿Te refieres al 1317?",
    "1819" → "¿Te refieres al 1820?"
}
```

---

## **3. PROTOCOLO DE VALIDACIÓN AUTOMÁTICA**

### **3.1 Flujo de Validación del Bot**
```
INPUT: Código mencionado por cliente
    ↓
PASO 1: Verificar si está en CÓDIGOS_VÁLIDOS_COMPLETO
    ↓
SI VÁLIDO: Proceder con información del apartamento
    ↓
SI NO VÁLIDO: Verificar MAPEO_CORRECCIONES
    ↓
SI HAY CORRECCIÓN: Aplicar silenciosamente y proceder
    ↓
SI AMBIGUO: Preguntar clarificación al cliente
    ↓
SI SIMILAR: Sugerir alternativa al cliente
    ↓
SI NO RECONOCIDO: Aplicar estrategia de opciones limitadas
```

### **3.2 Estrategia para Códigos No Reconocidos**
**PRINCIPIO:** Ofrecer máximo 2 opciones para manejar psicología de ventas y detectar preferencias del cliente.

```
ESTRATEGIA_OPCIONES_LIMITADAS:
1. Ofrecer 1 apartaestudio + 1 alcoba
2. Preguntar preferencia de características
3. Según respuesta, ofrecer opciones específicas
```

### **3.3 Reglas Críticas del Bot**
```
REGLA 1: NUNCA proceder con código no validado
REGLA 2: SIEMPRE aplicar corrección silenciosa cuando aplique
REGLA 3: Preguntar al cliente en caso de ambigüedad
REGLA 4: Máximo 2 opciones por mensaje para no abrumar
REGLA 5: Registrar internamente correcciones aplicadas
```

---

## **4. FORMATO OPTIMIZADO PARA MÓVIL**

### **4.1 Estructura de Respuestas para WhatsApp**
```
LÍNEA 1: Respuesta principal

SECCIÓN 2: Información organizada con bullets
• Elemento 1
• Elemento 2

LÍNEA FINAL: Pregunta natural solo cuando amerite
```

### **4.2 Reglas de Formato Móvil**
- **Máximo 10 líneas de texto** por mensaje
- **Línea vacía entre párrafos** para respiración visual
- **Enlaces siempre en línea separada** con número de apartamento
- **Un solo asterisco (*)** para negritas
- **Bullets con •** para listas cortas
- **Preguntas naturales** no presionantes

### **4.3 Formato de Enlaces con Número de Apartamento**
```
FORMATO CORRECTO:
*Fotos apartamento 1722A:*

https://wa.me/p/4700073360077195/573023371476
```

---

## **5. CASOS DE USO DOCUMENTADOS**

### **5.1 Validación Exitosa**
```
ENTRADA CLIENTE: "Me interesa el apartamento 1722A"
VALIDACIÓN BOT: "1722A" → CÓDIGO_VÁLIDO
RESPUESTA BOT: 
"¡Excelente elección! El 1722A es hermoso.

*Características:*
• Piso 17 con vista al mar
• Capacidad: 5-6 personas
• 1 alcoba + sala con sofás-cama

*Fotos apartamento 1722A:*

https://wa.me/p/4700073360077195/573023371476"
```

### **5.2 Corrección Silenciosa**
```
ENTRADA CLIENTE: "Quiero el 17B"
VALIDACIÓN BOT: "17B" → CORREGIR_A "1722B" (silenciosamente)
RESPUESTA BOT:
"Perfecto, el apartaestudio 1722B es ideal.

*Características:*

• Piso 17 con vista al mar
• Capacidad: 3-4 personas
• Cama doble + cama nido

*Fotos apartamento 1722B:*

https://wa.me/p/4930899063598676/573023371476"
```

### **5.3 Solicitud de Clarificación**
```
ENTRADA CLIENTE: "Me interesa el 1722"
VALIDACIÓN BOT: "1722" → CÓDIGO_AMBIGUO
RESPUESTA BOT:
"¿Te refieres al 1722A (alcoba) o 1722B (estudio)?

*1722A - Apartamento 1 alcoba:*
• 5-6 personas, más espacio

*1722B - Apartaestudio:*
• 3-4 personas, más económico"
```

### **5.4 Código No Válido - Estrategia de Opciones Limitadas**
```
ENTRADA CLIENTE: "Busco el apartamento 1823"
VALIDACIÓN BOT: "1823" → NO_EXISTE
RESPUESTA BOT:
"No encuentro el 1823 en nuestro inventario.

Te sugiero dos opciones populares:

*Apartamento 1820 (alcoba):*
• Piso 18, vista panorámica
• 6 personas

*Apartamento 1722B (estudio):*
• Piso 17, más económico
• 4 personas

¿Qué te parece?"
```

### **5.5 Sugerencia por Código Similar**
```
ENTRADA CLIENTE: "Quiero información del 816"
VALIDACIÓN BOT: "816" → SIMILAR_A "814"
RESPUESTA BOT:
"¿Te refieres al apartamento 814?

*Apartamento 814:*
• Piso 8 con balcón al mar
• Capacidad: 6 personas

*Fotos apartamento 814:*

https://wa.me/p/4496602113784014/573023371476"
```

---

## **6. MANEJO DE SITUACIONES ESPECIALES**

### **6.1 Cliente Insiste en Código Inexistente**
```
RESPUESTA BOT:
"Entiendo que buscas ese apartamento específico, pero no existe en nuestro sistema.

Tengo el inventario completo actualizado. 

¿Te gustaría que te ayude a encontrar el apartamento ideal según tus necesidades?"
```

### **6.2 Escalamiento Automático**
```
SITUACIÓN: Cliente muy insistente en código inexistente
FUNCIÓN: escalate_to_human("apartment_code_dispute", {
  "invalid_code": "[CÓDIGO]",
  "client_insistence": "high",
  "corrections_offered": "[LISTA]"
})
RESPUESTA: "Déjame verificar con el equipo. Un momento por favor."
```

---

## **7. VARIABLES DE SISTEMA DEL BOT**

```
[CÓDIGO_APARTAMENTO] = Código validado y corregido
[TIPO_APARTAMENTO] = "alcoba" | "estudio" (según validación)
[APARTAMENTO_VÁLIDO] = Boolean (true después de validación)
[CORRECCIÓN_APLICADA] = Boolean (true si se aplicó corrección silenciosa)
[OPCIONES_MOSTRADAS] = Máximo 2 opciones por mensaje
```

---

## **8. INTEGRACIÓN Y REFERENCIAS**

### **8.1 Para Información Complementaria**
```
ENLACES Y CAPACIDADES → Ver 03_INVENTARIO_APARTAMENTOS.txt
PRECIOS POR APARTAMENTO → Ver 02_TARIFAS_TEMPORADAS.txt
POLÍTICAS DE OCUPACIÓN → Ver 14_POLITICAS_OPERATIVAS.txt
TEMPLATES DETALLADOS → Ver 15_PLANTILLAS_RESPUESTAS.txt
```

---

## **NOTA ARQUITECTÓNICA CRÍTICA**

Este archivo contiene EXCLUSIVAMENTE:
- Lista de códigos válidos para validación automática del bot
- Reglas de corrección automática sin intervención humana  
- Protocolo de estrategia de ventas con opciones limitadas
- Formato optimizado para comunicación móvil

**NO CONTIENE:**
- Templates detallados de mensajes (Ver: 15_PLANTILLAS_RESPUESTAS.txt)
- Enlaces WhatsApp específicos (Ver: 03_INVENTARIO_APARTAMENTOS.txt)
- Capacidades detalladas (Ver: 03_INVENTARIO_APARTAMENTOS.txt)  
- Precios de apartamentos (Ver: 02_TARIFAS_TEMPORADAS.txt)

**OPTIMIZACIONES BOT:**
- ✅ Validación automática inteligente
- ✅ Comunicación natural optimizada para móvil  
- ✅ Estrategia de ventas con máximo 2 opciones por mensaje
- ✅ Correcciones silenciosas transparentes al cliente
- ✅ Formato con espaciado visual mejorado
- ✅ Escalamiento automático para casos complejos

Esta arquitectura garantiza que el bot valide códigos de manera inteligente, maneje la psicología de ventas efectivamente y se comunique de forma natural y no invasiva con los clientes.